{% extends 'products/base.html' %}
{% load humanize %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container my-5">
    <h2 class="mb-4">üìä Admin Dashboard</h2>

    <!-- Cards th·ªëng k√™ -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-white bg-primary">
                <div class="card-body">
                    <h5 class="card-title">T·ªïng ƒë∆°n h√†ng</h5>
                    <p class="card-text fs-3">{{ total_orders }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h5 class="card-title">Doanh thu</h5>
                    <p class="card-text fs-3">{{ total_revenue|intcomma }} ‚Ç´</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-info">
                <div class="card-body">
                    <h5 class="card-title">S·∫£n ph·∫©m</h5>
                    <p class="card-text fs-3">{{ total_fruits }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning">
                <div class="card-body">
                    <h5 class="card-title">Ng∆∞·ªùi d√πng</h5>
                    <p class="card-text fs-3">{{ total_users }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Top s·∫£n ph·∫©m b√°n ch·∫°y -->
    <div class="card mb-4">
        <div class="card-header">
            <h5>Top 5 s·∫£n ph·∫©m b√°n ch·∫°y</h5>
        </div>
        <div class="card-body">
            {% if top_fruits %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>S·∫£n ph·∫©m</th>
                            <th>S·ªë l∆∞·ª£ng ƒë√£ b√°n</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for fruit in top_fruits %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ fruit.fruit_name }}</td>
                            <td>{{ fruit.total_sold }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Ch∆∞a c√≥ d·ªØ li·ªáu b√°n h√†ng.</p>
            {% endif %}
        </div>
    </div>

    <!-- Li√™n k·∫øt qu·∫£n l√Ω -->
    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
        <a href="{% url 'user_management' %}" class="btn btn-outline-primary">üë• Qu·∫£n l√Ω t√†i kho·∫£n</a>
        <a href="{% url 'fruit_management' %}" class="btn btn-outline-success">üçà Qu·∫£n l√Ω tr√°i c√¢y</a>
        <a href="{% url 'order_management' %}" class="btn btn-outline-info">üì¶ Qu·∫£n l√Ω ƒë∆°n h√†ng</a>
    </div>
</div>
{% endblock %}